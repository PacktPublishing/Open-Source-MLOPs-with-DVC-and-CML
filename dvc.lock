schema: '2.0'
stages:
  process_data:
    cmd: python3 process_data.py
    deps:
    - path: data/IMDB_movie_ratings_sentiment.csv
      md5: 6efb5da809df99140316dd09dbb42078
      size: 52724248
    - path: process_data.py
      md5: 824b6514c33e78f884b17847eb7238c3
      size: 1843
    params:
      params.yaml:
        data_path: data/IMDB_movie_ratings_sentiment.csv
        output_path: data/processed/
        process:
          test_size: 0.1
    outs:
    - path: data/processed/X_test.txt
      md5: bf159952bc952888e62b0f48ead99bd5
      size: 5291143
    - path: data/processed/X_train.txt
      md5: a946a8cd8f304dae72d1b70eda214ea1
      size: 47169980
    - path: data/processed/y_test.txt
      md5: 7b340e891f941f7bbe45b254f17f0ea5
      size: 8000
    - path: data/processed/y_train.txt
      md5: e73c038928bb4be79e006164cd8ea0c3
      size: 72000
  train:
    cmd: python3 train_sklearn.py
    deps:
    - path: data/processed/X_test.txt
      md5: bf159952bc952888e62b0f48ead99bd5
      size: 5291143
    - path: data/processed/X_train.txt
      md5: a946a8cd8f304dae72d1b70eda214ea1
      size: 47169980
    - path: data/processed/y_test.txt
      md5: 7b340e891f941f7bbe45b254f17f0ea5
      size: 8000
    - path: data/processed/y_train.txt
      md5: e73c038928bb4be79e006164cd8ea0c3
      size: 72000
    - path: train_sklearn.py
      md5: f755f4fae5986b961816b7f37d6345c7
      size: 2629
    params:
      params.yaml:
        model_path: models/model.joblib
        output_path: data/processed/
        train:
          min_df: 5
          max_df: 0.5
          max_ngrams: 2
          stopwords: english
          loss: hinge
          learning_rate: 0.0001
    outs:
    - path: models/model.joblib
      md5: fcbed0715029193829c5500f3110cadf
      size: 41904494
  predict@test:
    cmd: python3 predict.py --data_path data/processed/X_test.txt --pred_path data/predictions/y_test_pred.txt
    deps:
    - path: data/processed/X_test.txt
      md5: bf159952bc952888e62b0f48ead99bd5
      size: 5291143
    - path: models/model.joblib
      md5: fcbed0715029193829c5500f3110cadf
      size: 41904494
    - path: predict.py
      md5: afc402be955b4c7077e0f6131a42f0cf
      size: 1250
    outs:
    - path: data/predictions/y_test_pred.txt
      md5: 9eea1cd1265473ae33201770d48cabdb
      size: 8000
  confusion@test:
    cmd: python3 concatenate.py --true_labels data/processed/y_test.txt --predicted_labels
      data/predictions/y_test_pred.txt --output_path data/predictions/test_confusion.csv
    deps:
    - path: concatenate.py
      md5: d1b9c08b4544730a403a8ac0167687cc
      size: 1011
    - path: data/predictions/y_test_pred.txt
      md5: 9eea1cd1265473ae33201770d48cabdb
      size: 8000
    - path: data/processed/y_test.txt
      md5: 7b340e891f941f7bbe45b254f17f0ea5
      size: 8000
    outs:
    - path: data/predictions/test_confusion.csv
      md5: 4f5d98fb85c475c23d88da02f4bb6206
      size: 16010
  predict@train:
    cmd: python3 predict.py --data_path data/processed/X_train.txt --pred_path data/predictions/y_train_pred.txt
    deps:
    - path: data/processed/X_train.txt
      md5: a946a8cd8f304dae72d1b70eda214ea1
      size: 47169980
    - path: models/model.joblib
      md5: fcbed0715029193829c5500f3110cadf
      size: 41904494
    - path: predict.py
      md5: afc402be955b4c7077e0f6131a42f0cf
      size: 1250
    outs:
    - path: data/predictions/y_train_pred.txt
      md5: 640b61c92a12e9886c3f395e8f409a0c
      size: 72000
  confusion@train:
    cmd: python3 concatenate.py --true_labels data/processed/y_train.txt --predicted_labels
      data/predictions/y_train_pred.txt --output_path data/predictions/train_confusion.csv
    deps:
    - path: concatenate.py
      md5: d1b9c08b4544730a403a8ac0167687cc
      size: 1011
    - path: data/predictions/y_train_pred.txt
      md5: 640b61c92a12e9886c3f395e8f409a0c
      size: 72000
    - path: data/processed/y_train.txt
      md5: e73c038928bb4be79e006164cd8ea0c3
      size: 72000
    outs:
    - path: data/predictions/train_confusion.csv
      md5: f5f2b794574a3d8c0e6093c8b770a8ea
      size: 144010
  evaluate@test:
    cmd: python3 evaluate.py --pred_path data/predictions/y_test_pred.txt --true_path
      data/processed/y_test.txt --metrics_path results/test_metrics.json
    deps:
    - path: data/predictions/y_test_pred.txt
      md5: 9eea1cd1265473ae33201770d48cabdb
      size: 8000
    - path: data/processed/y_test.txt
      md5: 7b340e891f941f7bbe45b254f17f0ea5
      size: 8000
    - path: evaluate.py
      md5: e3114ddd8b71ca620cf2f459d668f03e
      size: 1414
    outs:
    - path: results/test_metrics.json
      md5: 277ddc6742b65df2f1b85e1a3584aee3
      size: 643
  evaluate@train:
    cmd: python3 evaluate.py --pred_path data/predictions/y_train_pred.txt --true_path
      data/processed/y_train.txt --metrics_path results/train_metrics.json
    deps:
    - path: data/predictions/y_train_pred.txt
      md5: 640b61c92a12e9886c3f395e8f409a0c
      size: 72000
    - path: data/processed/y_train.txt
      md5: e73c038928bb4be79e006164cd8ea0c3
      size: 72000
    - path: evaluate.py
      md5: e3114ddd8b71ca620cf2f459d668f03e
      size: 1414
    outs:
    - path: results/train_metrics.json
      md5: 85b72aa49e5561e252cb1c97da48c552
      size: 704
