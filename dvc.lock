schema: '2.0'
stages:
  process_data:
    cmd: python3 process_data.py
    deps:
    - path: data/IMDB_movie_ratings_sentiment.csv
      md5: 6efb5da809df99140316dd09dbb42078
      size: 52724248
    - path: process_data.py
      md5: 9888ac7e32d500b34c167af0a77d6a58
      size: 1751
    params:
      params.yaml:
        process:
          test_size: 0.2
    outs:
    - path: data/processed/X_test.txt
      md5: b73b36a8cc7253bf26465b9652cd9d72
      size: 10595217
    - path: data/processed/X_train.txt
      md5: ce74ba9038f6f3a842c83b2d47cfe1e0
      size: 41865906
    - path: data/processed/y_test.txt
      md5: 0fef078ce1e847bde2a6af1a5bda4f1c
      size: 16000
    - path: data/processed/y_train.txt
      md5: 268cd55a39fe327418f03e051a0b023f
      size: 64000
  train:
    cmd: python3 train_sklearn.py --split-data-path data/processed --model-path models/model.joblib
      --metrics-path results/metrics.json --min-df 5 --max-df 0.5 --max-ngrams 3 --stopwords
      english --loss hinge --learning-rate 0.001
    deps:
    - path: data/processed/X_test.txt
      md5: b73b36a8cc7253bf26465b9652cd9d72
      size: 10595217
    - path: data/processed/X_train.txt
      md5: ce74ba9038f6f3a842c83b2d47cfe1e0
      size: 41865906
    - path: data/processed/y_test.txt
      md5: 0fef078ce1e847bde2a6af1a5bda4f1c
      size: 16000
    - path: data/processed/y_train.txt
      md5: 268cd55a39fe327418f03e051a0b023f
      size: 64000
    - path: train_sklearn.py
      md5: 364d54a511d4eceaf61a53d22c218264
      size: 2662
    params:
      params.yaml:
        train:
          min_df: 5
          max_df: 0.5
          max_ngrams: 3
          stopwords: english
          loss: hinge
          learning_rate: 0.001
    outs:
    - path: models/model.joblib
      md5: 86d79d3e76c2c4943cb120ef857a9abb
      size: 111478510
  predict@test:
    cmd: python3 predict.py --model-path models/model.joblib --data-path data/processed/X_test.txt
      --pred-path data/predictions/y_test_pred.txt
    deps:
    - path: data/processed/X_test.txt
      md5: b73b36a8cc7253bf26465b9652cd9d72
      size: 10595217
    - path: models/model.joblib
      md5: 86d79d3e76c2c4943cb120ef857a9abb
      size: 111478510
    - path: predict.py
      md5: ff7f799a9750763c2a5424193f9b2be0
      size: 1167
    outs:
    - path: data/predictions/y_test_pred.txt
      md5: 0754791b72e23eeb809e131eef3219bd
      size: 16000
  evaluate@test:
    cmd: python3 evaluate.py --pred-path data/predictions/y_test_pred.txt --true-path
      data/processed/y_test.txt --metrics-path results/test_metrics.json
    deps:
    - path: data/predictions/y_test_pred.txt
      md5: 0754791b72e23eeb809e131eef3219bd
      size: 16000
    - path: data/processed/y_test.txt
      md5: 0fef078ce1e847bde2a6af1a5bda4f1c
      size: 16000
    - path: evaluate.py
      md5: 05245a104b6f93b2e4d831dafa2bc907
      size: 1128
    outs:
    - path: results/test_metrics.json
      md5: 4cba0a2269d3a7473c62c9f2e01e8275
      size: 681
  predict@train:
    cmd: python3 predict.py --model-path models/model.joblib --data-path data/processed/X_train.txt
      --pred-path data/predictions/y_train_pred.txt
    deps:
    - path: data/processed/X_train.txt
      md5: ce74ba9038f6f3a842c83b2d47cfe1e0
      size: 41865906
    - path: models/model.joblib
      md5: 86d79d3e76c2c4943cb120ef857a9abb
      size: 111478510
    - path: predict.py
      md5: ff7f799a9750763c2a5424193f9b2be0
      size: 1167
    outs:
    - path: data/predictions/y_train_pred.txt
      md5: c20d79a6f11dfc84621f408e724631d1
      size: 64000
  evaluate@train:
    cmd: python3 evaluate.py --pred-path data/predictions/y_train_pred.txt --true-path
      data/processed/y_train.txt --metrics-path results/train_metrics.json
    deps:
    - path: data/predictions/y_train_pred.txt
      md5: c20d79a6f11dfc84621f408e724631d1
      size: 64000
    - path: data/processed/y_train.txt
      md5: 268cd55a39fe327418f03e051a0b023f
      size: 64000
    - path: evaluate.py
      md5: 05245a104b6f93b2e4d831dafa2bc907
      size: 1128
    outs:
    - path: results/train_metrics.json
      md5: 64712db5879477a1c979b259e8c864dd
      size: 680
  confusion@train:
    cmd: python3 concatenate.py --true-labels data/processed/y_train.txt --predicted-labels
      data/predictions/y_train_pred.txt --output-path data/predictions/train_confusion.csv
    deps:
    - path: concatenate.py
      md5: f8e74b4cecb63494a7001f3eb5b7f7a4
      size: 896
    - path: data/predictions/y_train_pred.txt
      md5: c20d79a6f11dfc84621f408e724631d1
      size: 64000
    - path: data/processed/y_train.txt
      md5: 268cd55a39fe327418f03e051a0b023f
      size: 64000
    outs:
    - path: data/predictions/train_confusion.csv
      md5: c90d72851a85c64a94bc5d8f05972fbb
      size: 128010
  confusion@test:
    cmd: python3 concatenate.py --true-labels data/processed/y_test.txt --predicted-labels
      data/predictions/y_test_pred.txt --output-path data/predictions/test_confusion.csv
    deps:
    - path: concatenate.py
      md5: f8e74b4cecb63494a7001f3eb5b7f7a4
      size: 896
    - path: data/predictions/y_test_pred.txt
      md5: 0754791b72e23eeb809e131eef3219bd
      size: 16000
    - path: data/processed/y_test.txt
      md5: 0fef078ce1e847bde2a6af1a5bda4f1c
      size: 16000
    outs:
    - path: data/predictions/test_confusion.csv
      md5: aa2976e311fd0a3e82bad6a838b71584
      size: 32010
  histogram:
    cmd: python3 review_lengths.py --input-path data/IMDB_movie_ratings_sentiment.csv
      --output-path data/processed/IMDB_review_lengths.csv
    deps:
    - path: data/IMDB_movie_ratings_sentiment.csv
      md5: 6efb5da809df99140316dd09dbb42078
      size: 52724248
    - path: review_lengths.py
      md5: a7ef558d32ed8761f81d8fb806f1497f
      size: 769
    outs:
    - path: data/processed/IMDB_review_lengths.csv
      md5: e906659fa9d46aa331b17b41344466fd
      size: 179466
